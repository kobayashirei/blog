---
title: study 2day pro
published: 2025-11-03
description: ''
image: ''
tags: [rust]
category: 'rust'
draft: false 
lang: ''
---

# ğŸ¦€ Rust æ§åˆ¶æµ (è¿›é˜¶ç‰ˆæ•™ç¨‹)

> ä½œè€…ï¼šxiaolin
> é€‚ç”¨èŒƒå›´ï¼šæœ‰ä¸€å®š Rust åŸºç¡€ï¼Œæƒ³æ·±å…¥ç†è§£æ§åˆ¶ç»“æ„ä¸è¡¨è¾¾å¼æœºåˆ¶ã€‚

---

## ç›®å½•

1. [æ§åˆ¶æµæ¦‚è¿°](#æ§åˆ¶æµæ¦‚è¿°)
2. [if è¡¨è¾¾å¼](#if-è¡¨è¾¾å¼)
3. [loop å¾ªç¯](#loop-å¾ªç¯)
4. [while å¾ªç¯](#while-å¾ªç¯)
5. [for å¾ªç¯](#for-å¾ªç¯)
6. [æ§åˆ¶å…³é”®å­—ï¼šbreak / continue / return](#æ§åˆ¶å…³é”®å­—)
7. [æ ‡ç­¾å¾ªç¯ï¼ˆLabeled Loopsï¼‰](#æ ‡ç­¾å¾ªç¯)
8. [match æ¨¡å¼åŒ¹é…](#match-æ¨¡å¼åŒ¹é…)
9. [if let / while let è¡¨è¾¾å¼](#if-let--while-let)
10. [æ§åˆ¶æµä¸­çš„è¡¨è¾¾å¼ç‰¹æ€§](#æ§åˆ¶æµä¸­çš„è¡¨è¾¾å¼ç‰¹æ€§)
11. [å®è·µå»ºè®®](#å®è·µå»ºè®®)

---

## ğŸ§­ æ§åˆ¶æµæ¦‚è¿°

Rust ä¸­æ‰€æœ‰æ§åˆ¶ç»“æ„ï¼ˆ`if`ã€`match`ã€`loop` ç­‰ï¼‰éƒ½æ˜¯ **è¡¨è¾¾å¼**ï¼Œå³éƒ½æœ‰è¿”å›å€¼ã€‚

åŒºåˆ«äº C / Go è¯­è¨€çš„è¯­å¥å¼é£æ ¼ï¼ŒRust çš„æ§åˆ¶æµæ˜¯ **å‡½æ•°å¼è¡¨è¾¾å¼é£æ ¼**ï¼š

```rust
let number = if true { 100 } else { 200 };
println!("{}", number); // è¾“å‡º 100
```

---

## ğŸ§© if è¡¨è¾¾å¼

### åŸºæœ¬ç”¨æ³•

```rust
let x = 10;
if x > 5 {
    println!("x å¤§äº 5");
} else {
    println!("x å°äºç­‰äº 5");
}
```

### è¡¨è¾¾å¼è¿”å›å€¼

```rust
let result = if x % 2 == 0 { "even" } else { "odd" };
println!("x æ˜¯ {}", result);
```

âš ï¸ æ³¨æ„ï¼š

* `if` / `else` åˆ†æ”¯çš„è¿”å›å€¼ç±»å‹å¿…é¡»ä¸€è‡´ã€‚

âŒ é”™è¯¯ç¤ºä¾‹ï¼š

```rust
let value = if true { 10 } else { "hello" }; // âŒ ç±»å‹ä¸ä¸€è‡´
```

---

## ğŸ” loop å¾ªç¯

`loop` è¡¨ç¤ºæ— é™å¾ªç¯ï¼Œç›´åˆ° `break` è¢«æ˜¾å¼è°ƒç”¨ã€‚

```rust
let mut count = 0;
loop {
    count += 1;
    if count == 3 {
        println!("é€€å‡ºå¾ªç¯");
        break;
    }
}
```

### loop çš„è¿”å›å€¼

Rust çš„ `loop` å¯ä»¥è¿”å›å€¼ï¼ï¼ˆé«˜çº§ç‰¹æ€§ï¼‰

```rust
let result = loop {
    let value = 42;
    break value * 2;
};

println!("ç»“æœ: {}", result); // 84
```

---

## âš™ï¸ while å¾ªç¯

å½“æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œå¾ªç¯ï¼š

```rust
let mut n = 0;
while n < 5 {
    println!("n = {}", n);
    n += 1;
}
```

ä¸ `loop` ç›¸æ¯”ï¼Œ`while` è‡ªåŠ¨åˆ¤æ–­æ¡ä»¶é€€å‡ºã€‚

---

## ğŸ”„ for å¾ªç¯

Rust çš„ `for` æ˜¯åŸºäº **è¿­ä»£å™¨** çš„é«˜çº§å¾ªç¯ç»“æ„ã€‚

### éå†åŒºé—´

```rust
for i in 0..5 {
    println!("i = {}", i);
}
```

> `0..5` è¡¨ç¤º `[0, 1, 2, 3, 4]`
> `0..=5` è¡¨ç¤º `[0, 1, 2, 3, 4, 5]`

### éå†é›†åˆ

```rust
let arr = [10, 20, 30];
for val in arr.iter() {
    println!("val = {}", val);
}
```

### éå†å¹¶ç´¢å¼•

```rust
for (i, val) in arr.iter().enumerate() {
    println!("ç¬¬ {} ä¸ªå€¼: {}", i, val);
}
```

---

## ğŸšª æ§åˆ¶å…³é”®å­—

### break

ç»ˆæ­¢å½“å‰å¾ªç¯ã€‚

```rust
for i in 0..10 {
    if i == 5 {
        break;
    }
    println!("i = {}", i);
}
```

### continue

è·³è¿‡å½“å‰è¿­ä»£ï¼Œè¿›å…¥ä¸‹ä¸€è½®ã€‚

```rust
for i in 0..5 {
    if i == 2 {
        continue;
    }
    println!("i = {}", i);
}
```

### return

é€€å‡ºå½“å‰å‡½æ•°ã€‚

```rust
fn calc() -> i32 {
    for i in 0..10 {
        if i == 3 {
            return i * 10;
        }
    }
    0
}
```

---

## ğŸ·ï¸ æ ‡ç­¾å¾ªç¯

Rust æ”¯æŒå¤šå±‚å¾ªç¯æ—¶çš„ **å¸¦æ ‡ç­¾è·³å‡º**ï¼ˆéå¸¸å¼ºå¤§ï¼‰ï¼š

```rust
let mut outer = 0;

'outer_loop: loop {
    let mut inner = 0;

    loop {
        if inner == 2 {
            break; // åªè·³å‡ºå†…å±‚
        }
        if outer == 1 {
            break 'outer_loop; // è·³å‡ºå¤–å±‚å¾ªç¯
        }
        inner += 1;
    }

    outer += 1;
}

println!("å¤–å±‚ç»“æŸ: {}", outer);
```

---

## ğŸ¯ match æ¨¡å¼åŒ¹é…

`match` æ˜¯ Rust ä¸­æ¯” `switch` æ›´å¼ºå¤§çš„æ§åˆ¶ç»“æ„ã€‚

```rust
let status = 200;

match status {
    200 => println!("OK"),
    404 => println!("Not Found"),
    500 => println!("Server Error"),
    _ => println!("Unknown"),
}
```

### æ¨¡å¼åŒ¹é…ç»‘å®šå˜é‡

```rust
let age = 20;

match age {
    0..=12 => println!("å„¿ç«¥"),
    13..=19 => println!("é’å°‘å¹´"),
    20..=30 => println!("é’å¹´"),
    _ => println!("æˆå¹´äºº"),
}
```

### å¤šåˆ†æ”¯åˆå¹¶

```rust
match status {
    200 | 201 => println!("Success"),
    400 | 404 => println!("Client Error"),
    _ => println!("Other"),
}
```

---

## ğŸ” if let / while let

è¿™ä¸¤ä¸ªè¯­æ³•æ˜¯ `match` çš„è¯­æ³•ç³–ï¼Œç”¨äºåŒ¹é…å•ä¸ªæ¨¡å¼ã€‚

### if let

```rust
let some_value = Some(10);

if let Some(v) = some_value {
    println!("å€¼ä¸º: {}", v);
} else {
    println!("ä¸º None");
}
```

### while let

```rust
let mut stack = vec![1, 2, 3];

while let Some(top) = stack.pop() {
    println!("å¼¹å‡º: {}", top);
}
```

---

## ğŸ§  æ§åˆ¶æµä¸­çš„è¡¨è¾¾å¼ç‰¹æ€§

Rust çš„æ‰€æœ‰æ§åˆ¶è¯­å¥éƒ½æ˜¯ **è¡¨è¾¾å¼ï¼ˆExpressionï¼‰**ï¼Œæ„å‘³ç€å¯ä»¥ç›´æ¥ç”¨äºèµ‹å€¼ï¼š

```rust
let grade = match 85 {
    90..=100 => "A",
    80..=89  => "B",
    70..=79  => "C",
    _ => "D",
};

println!("æˆç»©ç­‰çº§: {}", grade);
```

---

## ğŸª„ å®è·µå»ºè®®

| åœºæ™¯    | å»ºè®®å†™æ³•                   | ç†ç”±         |
| ----- | ---------------------- | ---------- |
| ç®€å•æ¡ä»¶  | `if`                   | æ¸…æ™°ç®€æ´       |
| å¤šæ¡ä»¶æšä¸¾ | `match`                | å¯è¯»æ€§é«˜       |
| æ— é™å¾ªç¯  | `loop` + `break value` | æ”¯æŒè¿”å›å€¼      |
| åµŒå¥—å¾ªç¯  | æ ‡ç­¾ + `break 'outer`    | é¿å…é€»è¾‘æ··ä¹±     |
| è§£æ„æšä¸¾  | `if let` / `match`     | Rust æœ€æ¨èæ¨¡å¼ |

---

## ğŸ§© ç¤ºä¾‹ï¼šç»¼åˆåº”ç”¨

```rust
fn main() {
    let mut n = 0;

    'counting: loop {
        println!("å½“å‰ n: {}", n);
        n += 1;

        if n == 3 {
            println!("è·³è¿‡ä¸€æ¬¡å¾ªç¯");
            continue;
        }

        match n {
            5 => {
                println!("è¾¾åˆ° 5ï¼Œé€€å‡ºå¤–å±‚å¾ªç¯");
                break 'counting;
            },
            _ => println!("ç»§ç»­å¾ªç¯ä¸­..."),
        }
    }

    println!("å¾ªç¯ç»“æŸï¼Œæœ€ç»ˆ n = {}", n);
}
```

è¾“å‡ºï¼š

```
å½“å‰ n: 0
ç»§ç»­å¾ªç¯ä¸­...
å½“å‰ n: 1
ç»§ç»­å¾ªç¯ä¸­...
å½“å‰ n: 2
è·³è¿‡ä¸€æ¬¡å¾ªç¯
å½“å‰ n: 3
ç»§ç»­å¾ªç¯ä¸­...
å½“å‰ n: 4
è¾¾åˆ° 5ï¼Œé€€å‡ºå¤–å±‚å¾ªç¯
å¾ªç¯ç»“æŸï¼Œæœ€ç»ˆ n = 5
```

---

## âœ… æ€»ç»“

| æ§åˆ¶ç»“æ„                 | ç‰¹ç‚¹         |
| -------------------- | ---------- |
| `if` / `else`        | è¡¨è¾¾å¼ï¼Œæœ‰è¿”å›å€¼   |
| `loop`               | æ— é™å¾ªç¯ï¼Œå¯è¿”å›å€¼  |
| `while`              | æ¡ä»¶å¾ªç¯       |
| `for`                | åŸºäºè¿­ä»£å™¨      |
| `break / continue`   | æ§åˆ¶å¾ªç¯æ‰§è¡Œ     |
| `'label`             | å¤šå±‚å¾ªç¯è·³å‡º     |
| `match`              | å¼ºå¤§çš„æ¨¡å¼åŒ¹é…    |
| `if let / while let` | match ç®€åŒ–å½¢å¼ |
